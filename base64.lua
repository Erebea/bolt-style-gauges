local e={};local t=function(e,t,a)local o=0;local t=2^t;for a=0,a-1 do local i=t+t;if(e%i)>=t then o=o+(2^a);end t=i;end return o;end;function e.makeencoder(e,t,a)local o={};for e,t in pairs({[0]="A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9",e or"+",t or"/",a or"="})do o[e]=t:byte();end return o;end local a=e.makeencoder();local o,i=string.char,table.concat;function e.encode(e,n,s)n=n or a;local a,h,r={},1,#e;local d=r%3;local l={};for i=1,r-d,3 do local e,i,r=e:byte(i,i+2);local e=(e*65536)+(i*256)+r;local i;if s then i=l[e];if not i then i=o(n[t(e,18,6)],n[t(e,12,6)],n[t(e,6,6)],n[t(e,0,6)]);l[e]=i;end else i=o(n[t(e,18,6)],n[t(e,12,6)],n[t(e,6,6)],n[t(e,0,6)]);end a[h]=i;h=h+1;end if d==2 then local e,i=e:byte(r-1,r);local e=(e*65536)+(i*256);a[h]=o(n[t(e,18,6)],n[t(e,12,6)],n[t(e,6,6)],n[64]);elseif d==1 then local e=e:byte(r)*65536;a[h]=o(n[t(e,18,6)],n[t(e,12,6)],n[64],n[64]);end return i(a);end return e;