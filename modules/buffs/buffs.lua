-- rgb colours of buff and debuff outlines
local buffr = 90
local buffg = 150
local buffb = 25
local debuffr = 204
local debuffg = 0
local debuffb = 0

-- converts a number in the range 0-1 to an integer in the range 0-255
local function roundcol (c)
  return math.floor((c * 255.0) + 0.5)
end

-- value multiplier that each letter represents that can appear in buff text
local multipliers = { h = 3600, k = 1000, m = 60 }

-- handlers for every valid character in buff text
local emptyhandler = function () end
local handlers = {
  r = emptyhandler, -- 'r' appears only in 'hr', so we handle 'h' as a multiplier (3600) and ignore 'r's
  ['%'] = emptyhandler,
  ['('] = function (details)
    -- note: '(' and ')' will both lead to this handler, because we don't read enough pixels to
    -- differentiate the two in some fonts, and we also don't need to.
    if details.parens == nil then details.parens = 0 end
  end,
}
for k, v in pairs(multipliers) do
  handlers[k] = function (details)
    if details.parens ~= nil then
      details.parens = details.parens * v
    elseif details.number ~= nil then
      details.number = details.number * v
    end
  end
end
for i = 0, 9 do
  handlers[i] = function (details)
    if details.parens ~= nil then
      details.parens = i + (details.parens * 10)
    elseif details.number ~= nil then
      details.number = i + (details.number * 10)
    else
      details.number = i
    end
  end
end


return {
  -- tries to parse the details of a buff or debuff on the screen.
  --
  -- parameters:
  -- `this`: the object returned by require() when importing this module (use the ':' operator)
  -- `event`: the render2d event possibly containing a buff or debuff
  -- `startindex`: the index of the image immediately after the image that's suspected of being a
  -- buff or debuff, or 1 if the suspected image was seen in a previous event (i.e. onrendericon)
  -- pxleft, pxtop: the top-left corner that the suspected image was drawn at (given by vertextargetxy)
  --
  -- returns up to 4 values:
  -- 1. true if this is a buff or debuff, false otherwise. if false, all following values are nil.
  -- 2. the number appearing on the buff, if any. this function will multiply the returned value by
  -- 60 for 'm', 3600 for 'hr', or 1000 for 'k' if any of those appear in the text. if no text appears
  -- at all, this will be nil.
  -- 3. the number appearing in parentheses on the buff, if any. if there are no parentheses, this
  -- wil be nil.
  -- 4. `true` if this is a buff (green), `false` if this is a debuff (red).
  --
  -- example.png, in this repo, shows a buff that would return: true, 27, 1, true
  tryreadbuffdetails = function (this, event, startindex, pxleft, pxtop)
    local vertexcount = event:vertexcount()
    local verticesperimage = event:verticesperimage()
    local details = {} -- details.number and details.parens both start as nil

    -- font characters are always double-rendered (black drop-shadow followed by same character in the
    -- intended colour), so we always want to skip reading every second image: step = verticesperimage * 2
    for i = startindex, vertexcount, verticesperimage * 2 do
      -- check if this is a solid-colour rectangle instead of an image
      local u, v = event:vertexuv(i)
      if u == nil or v == nil then
        -- check if this can be identified as a buff outline. if so, there are no more details to
        -- read past that, so just find out if it's a red or green outline and then return true.
        -- on the other hand, if it's not an outline, this wasn't a buff/debuff at all, so return false.
        local x, y = event:vertexxy(i + 2)
        if x == pxleft and y == pxtop then
          local fr, fg, fb = event:vertexcolour(i)
          local rfr, rfg, rfb = roundcol(fr), roundcol(fg), roundcol(fb)
          if rfr == buffr and rfg == buffg and rfb == buffb then
            return true, details.number, details.parens, true
          elseif rfr == debuffr and rfg == debuffg and rfb == debuffb then
            return true, details.number, details.parens, false
          end
        end
        return false
      end

      -- try to find this character
      local char = this:lookupchar(event, event:vertexatlasdetails(i))
      local handler = handlers[char]
      if not handler then return false end
      handler(details)
    end
    return false
  end,

  -- given some atlas coordinates and a render2d event, looks up a character in the buff text font.
  -- returns a number 0-9, or a string containing exactly 1 character, or nil.
  -- the '(' or ')' characters will both always return '('.
  -- ax,ay,aw,ah are the first four values returned by event:vertexatlasdetails
  lookupchar = function (this, event, ax, ay, aw, ah)
    local chars, row1--, row2

    if ah <= this.smallcharsrow1 then
      -- safety check on image size
      return nil
    elseif ah <= this.charsrow1 then
      chars = this.buffsmallchars
      row1 = this.smallcharsrow1
      --row2 = this.smallcharsrow2
    else
      chars = this.buffchars
      row1 = this.charsrow1
      --row2 = this.charsrow2
    end

    local char = chars[event:texturedata(ax, ay + row1, aw * 4)]
    --if type(char) == "table" then
    --  char = char[event:texturedata(ax, ay + row2, aw * 4)]
    --end
    return char
  end,


  -- lookup table of the 7th row (1-indexed, so y+6) of pixels in each character that can appear on a buff or debuff.
  -- four different fonts can appear depending on settings and the text being rendered: small, medium, medium2, and large.
  -- small2 is used when the size is set to "small" and there's a parentheses number on the buff.
  -- medium2 is used when the size is set to "medium" or "large", but there's too much text to fit using the normal font.
  -- medium3 is used when the size is set to "medium" or "large" and there's a parentheses number on the buff.
  -- note: '(' and ')' will both return '(' from this table, since we don't read enough pixels to tell the difference
  -- between the two in some fonts, and we don't need to differentiate the two in order to read buffs correctly.
  buffchars = {
    ['\xff\xff\xff\xc1\xff\xff\xff\xc4\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xc7\xff\xff\xff\xc9'] = 0, -- @0-small
    ['\xff\xff\xff\x00\xff\xff\xff\xc4\xff\xff\xff\xa1\xff\xff\xff\x2e\xff\xff\xff\xc9\xff\xff\xff\xa1\xff\xff\xff\x00'] = 0, -- @0-small2
    ['\xff\xff\xff\xe3\xff\xff\xff\xff\xff\xff\xff\x09\xff\xff\xff\x00\xff\xff\xff\x0b\xff\xff\xff\xff\xff\xff\xff\xe3'] = 0, -- @0-medium
    ['\xff\xff\xff\x00\xff\xff\xff\xed\xff\xff\xff\x21\xff\xff\xff\x00\xff\xff\xff\x54\xff\xff\xff\xc2'] = 0, -- @0-medium2
    ['\xff\xff\xff\xbc\xff\xff\xff\xea\xff\xff\xff\x02\xff\xff\xff\x00\xff\xff\xff\x43\xff\xff\xff\xff\xff\xff\xff\x6f'] = 0, -- @0-medium3
    ['\xff\xff\xff\xfd\xff\xff\xff\xff\xff\xff\xff\x31\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x02\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x2c'] = 0, -- @0-large
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xff\xff\xff\xff\x8c'] = 1, -- @1-small
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x3c\xff\xff\xff\xff\xff\xff\xff\x10'] = 1, -- @1-small2
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xff\xff\xff\xff\xf0'] = 1, -- @1-medium
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x24\xff\xff\xff\xf4'] = 1, -- @1-medium2
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xff\xff\xff\xff\xac'] = 1, -- @1-medium3
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x30'] = 1, -- @1-large
    ['\xff\xff\xff\x02\xff\xff\xff\xac\xff\xff\xff\xe6\xff\xff\xff\x25\xff\xff\xff\x00\xff\xff\xff\x00'] = 2, -- @2-small
    ['\xff\xff\xff\x71\xff\xff\xff\xf8\xff\xff\xff\x52\xff\xff\xff\x1c\xff\xff\xff\x1c\xff\xff\xff\x01'] = 2, -- @2-small2
    ['\xff\xff\xff\x00\xff\xff\xff\x01\xff\xff\xff\x96\xff\xff\xff\xff\xff\xff\xff\x97\xff\xff\xff\x02\xff\xff\xff\x00'] = 2, -- @2-medium
    ['\xff\xff\xff\x00\xff\xff\xff\x94\xff\xff\xff\xa9\xff\xff\xff\x01\xff\xff\xff\x00'] = 2, -- @2-medium2
    ['\xff\xff\xff\x00\xff\xff\xff\x93\xff\xff\xff\xf9\xff\xff\xff\x53\xff\xff\xff\x00\xff\xff\xff\x00'] = 2, -- @2-medium3
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x76\xff\xff\xff\xff\xff\xff\xff\xe9\xff\xff\xff\x15'] = 2, -- @2-large
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x0d\xff\xff\xff\xff\xff\xff\xff\x82'] = 3, -- @3-small
    ['\xff\xff\xff\x61\xff\xff\xff\x37\xff\xff\xff\x28\xff\xff\xff\xac\xff\xff\xff\xda\xff\xff\xff\x00'] = 3, -- @3-small2
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x19\xff\xff\xff\xff\xff\xff\xff\xdc'] = 3, -- @3-medium
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x2f\xff\xff\xff\xe8'] = 3, -- @3-medium2
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x0f\xff\xff\xff\xff\xff\xff\xff\xa1'] = 3, -- @3-medium3
    ['\xff\xff\xff\x00\xff\xff\xff\x24\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf1\xff\xff\xff\xa5\xff\xff\xff\x17\xff\xff\xff\x00'] = 3, -- @3-medium
    ['\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'] = 4, -- @4-small
    ['\xff\xff\xff\x24\xff\xff\xff\x24\xff\xff\xff\x57\xff\xff\xff\xff\xff\xff\xff\x2e'] = 4, -- @4-small2
    ['\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'] = 4, -- @4-medium
    ['\xff\xff\xff\xfe\xff\xff\xff\xec\xff\xff\xff\xec\xff\xff\xff\xee\xff\xff\xff\xff\xff\xff\xff\xec'] = 4, -- @4-medium2
    ['\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'] = 4, -- @4-medium3
    ['\xff\xff\xff\x08\xff\xff\xff\xdd\xff\xff\xff\xce\xff\xff\xff\x03\xff\xff\xff\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x30\xff\xff\xff\x00'] = 4, -- @4-large
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x1b\xff\xff\xff\xff\xff\xff\xff\x6e'] = 5, -- @5-small
    ['\xff\xff\xff\x4c\xff\xff\xff\x38\xff\xff\xff\x27\xff\xff\xff\xa8\xff\xff\xff\xce\xff\xff\xff\x00'] = 5, -- @5-small2
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x19\xff\xff\xff\xff\xff\xff\xff\xe6'] = 5, -- @5-medium
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x39\xff\xff\xff\xd9'] = 5, -- @5-medium2
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x1e\xff\xff\xff\xff\xff\xff\xff\x8b'] = 5, -- @5-medium3
    ['\xff\xff\xff\x90\xff\xff\xff\xff\xff\xff\xff\xe9\xff\xff\xff\xe1\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7b\xff\xff\xff\x00'] = 5, -- @5-large
    ['\xff\xff\xff\xd6\xff\xff\xff\xb7\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xa5\xff\xff\xff\xe6'] = 6, -- @6-small
    ['\xff\xff\xff\x00\xff\xff\xff\xd5\xff\xff\xff\x9d\xff\xff\xff\x2a\xff\xff\xff\xa5\xff\xff\xff\xcf\xff\xff\xff\x00'] = 6, -- @6-small2
    ['\xff\xff\xff\xee\xff\xff\xff\xfb\xff\xff\xff\x04\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xf7\xff\xff\xff\xf4'] = 6, -- @6-medium
    ['\xff\xff\xff\x07\xff\xff\xff\xf9\xff\xff\xff\x12\xff\xff\xff\x00\xff\xff\xff\x36\xff\xff\xff\xde'] = 6, -- @6-medium2
    ['\xff\xff\xff\xd1\xff\xff\xff\xdd\xff\xff\xff\x03\xff\xff\xff\x00\xff\xff\xff\x1b\xff\xff\xff\xff\xff\xff\xff\x8f'] = 6, -- @6-medium3
    ['\xff\xff\xff\xf1\xff\xff\xff\xff\xff\xff\xff\xe4\xff\xff\xff\x2f\xff\xff\xff\x11\xff\xff\xff\xa7\xff\xff\xff\xff\xff\xff\xff\xe1\xff\xff\xff\x00'] = 6, -- @6-large
    ['\xff\xff\xff\x00\xff\xff\xff\x02\xff\xff\xff\xdd\xff\xff\xff\xb3\xff\xff\xff\x00\xff\xff\xff\x00'] = 7, -- @7-small
    ['\xff\xff\xff\x00\xff\xff\xff\x85\xff\xff\xff\xcd\xff\xff\xff\x00\xff\xff\xff\x00'] = 7, -- @7-small2
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xc7\xff\xff\xff\xff\xff\xff\xff\x4e\xff\xff\xff\x00\xff\xff\xff\x00'] = 7, -- @7-medium
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xab\xff\xff\xff\x88\xff\xff\xff\x00\xff\xff\xff\x00'] = 7, -- @7-medium2
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x85\xff\xff\xff\xff\xff\xff\xff\x53\xff\xff\xff\x00\xff\xff\xff\x00'] = 7, -- @7-medium3
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x86\xff\xff\xff\xff\xff\xff\xff\xcf\xff\xff\xff\x00\xff\xff\xff\x00'] = 7, -- @7-large
    ['\xff\xff\xff\xf2\xff\xff\xff\x96\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x9a\xff\xff\xff\xf6'] = 8, -- @8-small
    ['\xff\xff\xff\x21\xff\xff\xff\xff\xff\xff\xff\x5d\xff\xff\xff\x86\xff\xff\xff\xed\xff\xff\xff\x00'] = 8, -- @8-small2
    ['\xff\xff\xff\xcd\xff\xff\xff\xff\xff\xff\xff\x2b\xff\xff\xff\x00\xff\xff\xff\x3c\xff\xff\xff\xff\xff\xff\xff\xcc'] = 8, -- @8-medium
    ['\xff\xff\xff\x1a\xff\xff\xff\xfb\xff\xff\xff\x01\xff\xff\xff\x00\xff\xff\xff\x30\xff\xff\xff\xe7'] = 8, -- @8-medium2
    ['\xff\xff\xff\xf5\xff\xff\xff\xb8\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x0f\xff\xff\xff\xff\xff\xff\xff\xa1'] = 8, -- @8-medium3
    ['\xff\xff\xff\x00\xff\xff\xff\x4b\xff\xff\xff\xf9\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xeb\xff\xff\xff\x44\xff\xff\xff\x00\xff\xff\xff\x00'] = 8, -- @8-large
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x1c\xff\xff\xff\xf6\xff\xff\xff\x8e'] = 9, -- @9-small
    ['\xff\xff\xff\x00\xff\xff\xff\x21\xff\xff\xff\x24\xff\xff\xff\x5d\xff\xff\xff\xf0\xff\xff\xff\x4e\xff\xff\xff\x00'] = 9, -- @9-small2
    ['\xff\xff\xff\x00\xff\xff\xff\x13\xff\xff\xff\x46\xff\xff\xff\x35\xff\xff\xff\x25\xff\xff\xff\xff\xff\xff\xff\xb8'] = 9, -- @9-medium
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x8d\xff\xff\xff\x9b'] = 9, -- @9-medium2
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x97\xff\xff\xff\xff\xff\xff\xff\x30'] = 9, -- @9-medium3
    ['\xff\xff\xff\x66\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xec\xff\xff\xff\xec\xff\xff\xff\xd1\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x1e'] = 9, -- @9-large
    ['\xff\xff\xff\x03\xff\xff\xff\xf0\xff\xff\xff\x56\xff\xff\xff\x00'] = '(', -- @(-small2
    ['\xff\xff\xff\xec\xff\xff\xff\xbf\xff\xff\xff\x00\xff\xff\xff\x00'] = '(', -- @(-medium3
    ['\xff\xff\xff\x00\xff\xff\xff\x82\xff\xff\xff\xc4\xff\xff\xff\x00'] = '(', -- @)-small2
    ['\xff\xff\xff\x00\xff\xff\xff\x14\xff\xff\xff\xff\xff\xff\xff\x97'] = '(', -- @)-medium3
    ['\xff\xff\xff\xff\xff\xff\xff\x8c\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xff\xff\xff\xff\x8c\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xff\xff\xff\xff\x8c'] = 'm', -- @m-small
    ['\xff\xff\xff\xff\xff\xff\xff\xf0\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xf0\xff\xff\xff\xff\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xe0\xff\xff\xff\xff\xff\xff\xff\x10'] = 'm', -- @m-medium
    -- is it possible to render m-medium2?
    ['\xff\xff\xff\xff\xff\xff\xff\xac\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xac\xff\xff\xff\xff\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x58\xff\xff\xff\xff\xff\xff\xff\x54'] = 'm', -- @m-medium3
    ['\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x30\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x30\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x60\xff\xff\xff\xff\xff\xff\xff\xd0'] = 'm', -- @m-large
    ['\xff\xff\xff\xff\xff\xff\xff\x90\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x8c\xff\xff\xff\xff'] = 'h', -- @h-small
    ['\xff\xff\xff\xff\xff\xff\xff\xfc\xff\xff\xff\x01\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\xf0\xff\xff\xff\xff'] = 'h', -- @h-medium
    ['\xff\xff\xff\x24\xff\xff\xff\xf6\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x24\xff\xff\xff\xf4'] = 'h', -- @h-medium2
    ['\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xd2\xff\xff\xff\x13\xff\xff\xff\x00\xff\xff\xff\x6b\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x13'] = 'h', -- @h-large
    ['\xff\xff\xff\xff\xff\xff\xff\x8c\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00'] = 'r', -- @r-small
    ['\xff\xff\xff\xff\xff\xff\xff\xf0\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00'] = 'r', -- @r-medium
    ['\xff\xff\xff\x24\xff\xff\xff\xf4\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00'] = 'r', -- @r-medium2
    ['\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x30\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x00'] = 'r', -- @r-large
    ['\xff\xff\xff\x00\xff\xff\xff\x00\xff\xff\xff\x01\xff\xff\xff\xd0\xff\xff\xff\x3d\xff\xff\xff\x7f\xff\xff\xff\xff\xff\xff\xff\x0f\xff\xff\xff\xff\xff\xff\xff\x7f'] = '%', -- @%-small
    ['\xff\xff\xff\x00\xff\xff\xff\x1e\xff\xff\xff\x48\xff\xff\xff\x1d\xff\xff\xff\x8b\xff\xff\xff\xc1\xff\xff\xff\x00\xff\xff\xff\xf1\xff\xff\xff\xf4\xff\xff\xff\x00\xff\xff\xff\xf5\xff\xff\xff\xf0'] = '%', -- @%-medium
    ['\xff\xff\xff\x71\xff\xff\xff\xff\xff\xff\xff\xf7\xff\xff\xff\xf8\xff\xff\xff\xff\xff\xff\xff\x7d\xff\xff\xff\xe7\xff\xff\xff\xcb\xff\xff\xff\xa7\xff\xff\xff\xff\xff\xff\xff\xcd\xff\xff\xff\xe3\xff\xff\xff\xff\xff\xff\xff\x6a'] = '%', -- @%-large
  },
  charsrow1 = 6,
  --charsrow2 = 1,

  -- like buffchars but for characters not tall enough for buffchars (atlas_height <= 6)
  -- first set of data is row 4 (y+3)
  buffsmallchars = {
    ['\xff\xff\xff\x3c\xff\xff\xff\xff\xff\xff\xff\x10\xff\xff\xff\x3c\xff\xff\xff\xff\xff\xff\xff\x0c\xff\xff\xff\x3c\xff\xff\xff\xff\xff\xff\xff\x0c'] = 'm', -- @m-small2
  },
  smallcharsrow1 = 3,
  --smallcharsrow2 = 1,

}
